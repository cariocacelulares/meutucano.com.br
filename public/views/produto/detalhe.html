<div id="page-header" class="row">
    <page-title icon="fa-mobile" title="Detalhes do produto" description="Aqui é possível visualizar todas as informações do produto"></page-title>
    <div class="col-md-6 button-bar">
            <a ui-sref="app.produtos.form({sku: ProdutoDetalhe.produto.sku})" class="btn-info" roles="admin|gestor"><i class="fa-pencil"></i>&nbsp; Editar</a>
            <a onclick="history.back()" title="Voltar para a página anterior" class="btn-default"><i class="fa-reply"></i>&nbsp; Voltar</a>
    </div>
</div>

<form novalidate="novalidate" class="form-default" id="detalheProduto">
    <tabs>
        <tab name="infosProduto" title="Informações do produto">
            <div class="row form-group">
                <div class="col-md-6">
                    <label for="titulo">Título</label>
                    <input ng-model="ProdutoDetalhe.produto.titulo" id="titulo" readonly />
                </div>
                <div class="col-md-2 form-group">
                    <label for="estado">Estado</label>
                    <input ng-model="ProdutoDetalhe.produto.estado_description" id="estado" readonly />
                </div>
                <div class="col-md-3 form-group">
                    <label for="sku">SKU</label>
                    <input ng-model="ProdutoDetalhe.produto.sku" id="sku" readonly />
                </div>
                <div class="col-md-1 form-group">
                    <label for="estoque">Estoque</label>
                    <input ng-model="ProdutoDetalhe.produto.estoque" id="estoque" readonly />
                </div>
            </div>
        </tab>
        <tab ng-if="ProdutoDetalhe.inspecoesTecnicas.length" name="produtosRevisados" title="Itens Revisados">
            <div ng-if="ProdutoDetalhe.inspecoesTecnicas">
                <p class="m-b-30">Os códigos de inspeção abaixo já foram revisados e estão aguardando um pedido (<b>{{ ProdutoDetalhe.inspecoesTecnicas.length }}</b>)</p>
                <span ng-repeat="revisao in ProdutoDetalhe.inspecoesTecnicas" class="col-md-3 fz-15 m-b-10 text-center">{{ revisao.id }}</span>
            </div>
            <p ng-if="!ProdutoDetalhe.inspecoesTecnicas.length" class="text-center m-t-40">Não existe nenhum item revisado para este produto.</p>
        </tab>
        <tab ng-if="ProdutoDetalhe.pedidoProdutos.data.length" name="pedidosAbertos" title="Pedidos abertos">
            <div class="row">
                <div ng-if="ProdutoDetalhe.pedidoProdutos[0] || ProdutoDetalhe.pedidoProdutos[1]" class="col-md-12">
                    <p>
                        <span>Produtos reservados: </span>
                        <span ng-if="ProdutoDetalhe.pedidoProdutos[0]"><b>{{ ProdutoDetalhe.pedidoProdutos[0] }}</b> pendente(s)</span>
                        <span ng-if="ProdutoDetalhe.pedidoProdutos[0] && ProdutoDetalhe.pedidoProdutos[1]"> e </span>
                        <span ng-if="ProdutoDetalhe.pedidoProdutos[1]"><b>{{ ProdutoDetalhe.pedidoProdutos[1] }}</b> pago(s)</span>.
                    </p>
                </div>
            </div>
            <div class="row m-t-0">
                <div class="col-md-12">
                    <table class="table info-style small first-col-normal table-scroll no-padding">
                        <thead>
                            <tr>
                                <th class="text-center">Status</th>
                                <th class="text-center">Código</th>
                                <th class="text-center">Marketplace</th>
                                <th class="text-center">Qtd</th>
                                <th class="text-center">Valor</th>
                            </tr>
                        </thead>
                        <tbody style="height:250px">
                            <tr ng-repeat="pedido in ProdutoDetalhe.pedidoProdutos.data track by $index">
                                <td class="text-center">
                                    <span class="label label-{{ ProdutoDetalhe.pedidoHelper.parseStatusClass(pedido.status) }} m-b-0">
                                        {{ pedido.status_description }}
                                    </span>
                                </td>
                                <td class="text-center">
                                    <a ui-sref="app.pedidos.detalhe({id: pedido.id})">
                                        {{ pedido.codigo_marketplace }}
                                    </a>
                                </td>
                                <td class="text-center">{{ pedido.marketplace }}</td>
                                <td class="text-center">{{ pedido.quantidade }}</td>
                                <td class="text-center">{{ pedido.valor }}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </tab>
        <tab name="imeisDisponiveis" title="Imeis disponíveis" ng-if="ProdutoDetalhe.imeis.length">
            <div class="row">
                <div class="col-md-12">
                    <p>Existem <b>{{ ProdutoDetalhe.imeis.length }}</b> IMEIS disponíveis para este produto.</p>
                </div>
            </div>
            <div class="row m-t-0">
                <div class="col-md-12">
                    <table class="table info-style small first-col-normal table-scroll no-padding">
                        <thead>
                            <tr>
                                <th class="text-center">IMEI</th>
                                <th class="text-center">Entrada</th>
                                <th class="text-center">Estoque</th>
                            </tr>
                        </thead>
                        <tbody style="height:250px">
                            <tr ng-repeat="imei in ProdutoDetalhe.imeis track by $index">
                                <td class="text-center">{{ imei.imei }}</td>
                                <td class="text-center">{{ imei.created_at }}</td>
                                <td class="text-center">{{ imei.product_stock.stock.title }}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </tab>
    </tabs>
</form>
