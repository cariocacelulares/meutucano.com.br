<div class="row m-b-20">
    <div class="col-md-6">
        <div class="widget-16-header">
            <span class="icon-thumbnail bg-master-light pull-left text-master"><i class="fa fa-cubes"></i></span>
            <div class="pull-left">
                <strong class="page-title no-margin font-montserrat all-caps fs-13">Pedidos</strong><br>
                <small class="small-hint">Todos pedidos realizados nos marketplaces e e-commerce.</small>
            </div>
            <div class="clearfix"></div>
        </div>
    </div>
    <div class="col-md-6">
        <div class="pull-right">
            <!-- <button ng-click="PedidoList.refreshAll()" class="btn btn-primary" style="margin-top: 3px;"><i class="fa fa-refresh"></i>&nbsp; Atualizar</button> -->
        </div>
    </div>
</div>
<hr>
<table class="table m-b-0" cellpadding="0" cellspacing="0" ts-wrapper>
    <thead>
        <tr>
            <th class="text-center" ts-criteria="id" width="160">Código</th>
            <th class="text-center" ts-criteria="marketplace" width="150">Marketplace</th>
            <th>Cliente</th>
            <th class="text-center" ts-criteria="prazo|parseInt" width="120">Valor</th>
            <th class="text-center" ts-criteria="data_envio|parseDate" ts-default width="120">Data</th>
            <th ts-criteria="status" width="150">Status</th>
            <th width="130" style="min-width: 130px;"></th>
        </tr>
        <tr class="table-filter">
            <th>
                <input class="form-control big" ng-model="PedidoList.busca.pedido.nota.chave" placeholder="Nº do pedido" ng-model-options="{debounce:500}" />
            </th>
            <th>
                <select ng-model="PedidoList.busca.status" class="small form-control">
                    <option value="">Todos</option>
                    <option value="b2w">B2W</option>
                    <option value="cnova">CNOVA</option>
                    <option value="mercadolivre">Mercado Livre</option>
                    <option value="walmart">Walmart</option>
                    <option value="site">E-commerce</option>
                </select>
            </th>
            <th>
                <input class="form-control big" ng-model="PedidoList.busca.pedido.cliente.nome" placeholder="Nome do cliente" ng-model-options="{debounce:500}" />
            </th>
            <th>
                <input class="form-control small" ng-model="PedidoList.busca.prazo" placeholder="Valor" ng-model-options="{debounce:500}"  />
            </th>
            <th>
                <div class="date-picker">
                    <input class="form-control small" ng-model="PedidoList.busca.data_envio_readable" ng-change="App.changeDate()" placeholder="Data"  />
                    <div class="picker-wrap">
                        <date-picker ng-model="PedidoList.busca.data_envio_readable"></date-picker>
                    </div>
                </div>
            </th>
            <th>
                <select ng-model="PedidoList.busca.status" class="small form-control">
                    <option value="">Todos</option>
                    <option value="2">Pendente</option>
                    <option value="3">Pago</option>
                    <option value="6">Faturado</option>
                    <option value="6">Enviado</option>
                    <option value="6">Concluído</option>
                    <option value="6">Cancelado</option>
                </select>
            </th>
            <th colspan="2"></th>
        </tr>
    </thead>
    <tbody ng-if="PedidoList.loading">
        <tr>
            <td colspan="50">
                <div class="progress-circle-indeterminate m-t-20 m-b-20" style="display: block;"></div>
            </td>
        </tr>
    </tbody>
    <tbody ng-if="PedidoList.pedidos && !PedidoList.loading">
        <tr ng-repeat="pedido in PedidoList.pedidos | filter:PedidoList.busca:strict" ts-repeat>
            <td class="text-center" ng-bind="pedido.codigo_marketplace || 'Sem código'"></td>
            <td class="text-center">
                <strong ng-bind="pedido.marketplace_readable"></strong>
            </td>
            <td>
                <strong ng-bind="pedido.cliente.nome"></strong>
                <br>
                <small>
                    <span ng-bind="pedido.cliente.fone"></span> - CEP: <strong ng-bind="pedido.endereco.cep_readable"></strong> -
                    <span ng-bind="pedido.endereco.cidade"></span> / <span ng-bind="pedido.endereco.uf"></span>
                </small>
            </td>
            <td class="text-center" ng-bind="pedido.total | currency"></td>
            <td class="text-center" ng-bind="pedido.created_at_readable"></td>
            <td class="status status-{{ pedido.status }}">
                <div style="display: block;" ng-class="{
                        'alert-danger': pedido.status == 3 || pedido.status == 5 || pedido.status == 6,
                        'alert-warning': pedido.status == 2,
                        'alert-success': pedido.status == 4,
                        'alert-info': pedido.status == 1 || pedido.status == 7 || pedido.status == 8
                        }" class="alert m-b-0">
                    <strong ng-bind="pedido.status_description"></strong>
                </div>
            </td>
            <td>
                <div class="dropdown">
                    <button class="btn btn-info dropdown-toggle" type="button">
                        <i class="fa fa-cog"></i>&nbsp; Ações
                        <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu">
                        <li>
                            <a title="Editar pedido" ng-click="App.editar(rastreio)"><i class="fa fa-edit"></i>&nbsp; Editar</a>
                        </li>
                        <li>
                            <a title="Devolução" ng-click="App.devolucao(rastreio)"><i class="fa fa-undo"></i>&nbsp; Devolução</a>
                        </li>
                        <li>
                            <a title="Logística reversa" ng-click="App.logistica(rastreio)"><i class="fa fa-exchange"></i>&nbsp; Logística</a>
                        </li>
                        <li>
                            <a title="Pedido de informação" ng-click="App.pi(rastreio)"><i class="fa fa-exclamation-triangle"></i>&nbsp; PI</a>
                        </li>
                        <li>
                            <a ng-click="App.printXML(pedido.pedido_id)"><i class="fa fa-file-code-o"></i>&nbsp; XML</a>
                        </li>
                        <li>
                            <a ng-click="App.printDanfe(pedido.pedido_id)"><i class="fa fa-file-pdf-o"></i>&nbsp; DANFE</a>
                        </li>
                        <li>
                            <a ng-click="App.printEtiqueta(pedido.id)"><i class="fa fa-tag"></i>&nbsp; Etiqueta</a>
                        </li>
                    </ul>
                </div>
            </td>
        </tr>
    </tbody>
</table>
