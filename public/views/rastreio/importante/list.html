<div id="page-header" class="row">
    <page-title icon="fa-truck" title="Rastreios importantes" description="Mostra os rastreios que precisam de alguma ação."></page-title>
    <div class="col-md-6 button-bar">
        <button ng-click="RastreioImportanteList.refreshAll()" class="btn-success"><i class="fa-refresh"></i>&nbsp; Atualizar status</button>
    </div>
</div>
<table-header data="RastreioImportanteList.tableHeader"></table-header>
<table class="table info-style">
    <thead>
        <tr>
            <th class="text-center" width="140">Código</th>
            <th>Cliente</th>
            <th class="text-center" width="120">Envio</th>
            <th class="text-center" width="120">Prazo</th>
            <th class="text-center" width="150">Rastreio</th>
            <th width="150">Status</th>
            <th width="75" style="min-width: 75px;"></th>
        </tr>
        <tr class="table-filter" static-include="views/rastreio/importante/list_filter.html"></tr>
    </thead>
    <tbody ng-if="RastreioImportanteList.loading" class="loading">
        <tr><td colspan="50"><loading></loading></td></tr>
    </tbody>
    <tbody ng-if="RastreioImportanteList.tableData && !RastreioImportanteList.loading">
        <tr ng-repeat="rastreio in RastreioImportanteList.tableData.data">
            <td class="text-center fs-11">
                <strong>{{ rastreio.pedido.marketplace }}</strong><br>
                {{ rastreio.pedido.codigo_marketplace || 'Sem código' }}
            </td>
            <td>
                <strong>{{ rastreio.pedido.cliente.nome | uppercase }}</strong>
                <br>
                <small>
                    {{ rastreio.pedido.cliente.fone }} - CEP: <strong>{{ rastreio.pedido.endereco.cep_readable }}</strong> - 
                    {{ rastreio.pedido.endereco.cidade }} / {{ rastreio.pedido.endereco.uf }}
                </small>
            </td>
            <td class="text-center">{{ rastreio.data_envio_readable }}</td>
            <td class="text-center">
                {{ rastreio.prazo_date }}<br>
                <small class="hint-text">{{ rastreio.prazo }} dia(s)</small>
            </td>
            <td class="text-center">
                <a title="Rastrear código" target="_blank" ng-href="{{ pi.rastreio.rastreio_url }}">{{ rastreio.rastreio }}</a>
            </td>
            <td class="text-center">
                <span class="label {{ (rastreio.status == 2) ? 'label-warning' : 'label-danger' }} m-b-0">
                    {{ rastreio.status_description }}
                </span>
            </td>
            <td>
                <a class="btn-info" ui-sref="app.pedidos.detalhe({id: rastreio.pedido.id})">
                    <i class="fa-eye"></i>
                </a>
            </td>
        </tr>
    </tbody>
</table>