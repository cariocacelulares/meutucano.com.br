<?php namespace App\Http\Controllers;

use App\Http\Controllers\RestResponseTrait;
use App\Http\Requests;
use App\Http\Controllers\Controller;
use App\Models\Cliente;
use App\Models\Pedido;
use App\Models\PedidoNota;
use App\Models\PedidoRastreio;
use App\Models\PedidoRastreioPi;
use App\Models\PedidoProduto;
use App\Models\PedidoImposto;
use App\Models\Produto;
use Illuminate\Support\Facades\Input;
use Carbon\Carbon;

/**
 * Class SearchController
 * @package App\Http\Controllers
 */
class SearchController extends Controller
{
    use RestResponseTrait;

    public function difa() 
    {
        $imei = [
            '13532009598878',
            '13593000490200',
            '13174003896329',
            '13175000885496',
            '13061005284895',
            '13173006818918',
            '13047003350051',
            '13059006197959',
            '13063007771168',
            '13175003095382',
            '13191002642702',
            '13194001590179',
            '13207008391993',
            '13182002165075',
            '13186008820021',
            '13193003150438',
            '352053064184883',
            '358761054196279',
            '352017068644390',
            '352047063707025',
            '351989065424912',
            '352019060085945',
            '13985001814059',
            '352050061711056',
            '354404067976163',
            '354405068772642',
            '354407069063237',
            '354443063459402',
            '13175000885496',
            '13032002654331',
            '13059008834179',
            '13059009557498',
            '13183003919601',
            '13029006253375',
            '13032003227103',
            '13032007477951',
            '13037004618226',
            '13037005386971',
            '13038008701505',
            '13039002578618',
            '13039004644996',
            '13043009378311',
            '13048005879279',
            '13051007604398',
            '13059001184713',
            '13060001385862',
            '13060001530673',
            '13060002332574',
            '13060006202443',
            '13061001464913',
            '13061002635057',
            '13061002665211',
            '13061008030840',
            '13062008261500',
            '13063003949883',
            '13063007178760',
            '13066009575909',
            '13067002724122',
            '13175006186758',
            '13179007237735',
            '13181004684828',
            '13183001042588',
            '13183008943010',
            '13184004193683',
            '13185001865819',
            '13188000691392',
            '13189002157564',
            '13190003165432',
            '13192002673036',
            '13193000227056',
            '13193001697190',
            '13195006093663',
            '13201002498052',
            '13201002585486',
            '13201006520919',
            '13202008922210',
            '13534005362325',
            '13034006455137',
            '13040002586825',
            '13043003062358',
            '13046005975543',
            '13047006122671',
            '13057004296062',
            '13060004611017',
            '13061008675495',
            '13062006507409',
            '13171007920360',
            '13183005195598',
            '13185001199821',
            '13186003579952',
            '13186008926885',
            '13187009137621',
            '13189003969611',
            '13192003050465',
            '13194007378975',
            '13198007665117',
            '13200000375510',
            '13200003282515',
            '13541002834826',
            '13029003650615',
            '13041007773814',
            '13052001815766',
            '13052003873748',
            '13054009581606',
            '13055000957877',
            '13055005045819',
            '13059008290380',
            '13059009514820',
            '13061000056785',
            '13061001373056',
            '13061005372484',
            '13062006385822',
            '13067003085903',
            '13067008985974',
            '13081000808698',
            '13173008057705',
            '13179004716533',
            '13179008527761',
            '13182008282338',
            '13183005285308',
            '13186003298538',
            '13187003974110',
            '13191001450107',
            '13192002219236',
            '13193000136992',
            '13193001091592',
            '13193002393724',
            '13200001821066',
            '13201000932763',
            '13207000544706',
            '13537005330671',
            '13037002054440',
            '13044007039681',
            '13044009053375',
            '13051006843302',
            '13056005390668',
            '13058004781541',
            '13061002170485',
            '13061007628800',
            '13061008570068',
            '13063006162211',
            '13070008442970',
            '13071005372012',
            '13170005430307',
            '13170005676693',
            '13173000025056',
            '13174000031433',
            '13174004622096',
            '13174006588212',
            '13175000882345',
            '13175000882584',
            '13175003119158',
            '13175006425032',
            '13175008973682',
            '13176008714266',
            '13180003888703',
            '13184000907870',
            '13184001156378',
            '13184003343073',
            '13185002636482',
            '13186001012873',
            '13186004748184',
            '13193001282076',
            '13193002157830',
            '13193002774881',
            '13193005549652',
            '13193005728686',
            '13201001831394',
            '13201003883096',
            '13534007472486',
            '13539002043281',
            '13040000014010',
            '13046000815025',
            '13060000435643',
            '13061005779704',
            '13062009211173',
            '13070005252992',
            '13071009870953',
            '13171006130904',
            '13184002375001',
            '13184002512884',
            '13192002992295',
            '13192003789898',
            '13199007013233',
            '13205004755625',
            '13435005068617',
            '13035002492545',
            '13039001369068',
            '13059008930019',
            '13063000980923',
            '13071001837711',
            '13170006101402',
            '13174008610949',
            '13176001421901',
            '13181001713315',
            '13183001117372',
            '13183002782943',
            '13187003702685',
            '13192000850149',
            '13192000935031',
            '13192007717689',
            '13201002693025',
            '13205008401929',
            '13539005822608',
            '513063005660637',
            '358761054196279',
            '13061002170485',
            '13985001814059',
            '13063007771168',
            '13174000031433',
            '13186008820021',
            '13058004781541',
            '13051006843302',
            '359296066604761',
            '359296066605222',
            '359296066605867',
            '359296066786428',
            '359296066895062',
            '359296066914145',
            '359296066914285',
            '359296067007584',
            '359296067045733',
            '359296067045774',
            '359296065993330',
            '359296066061061',
            '359296066125643',
            '359302062346009',
            '359302062367187',
            '359302063024936',
            '359302063230905',
            '359302063526559',
            '359304062757615',
            '359304062759025',
            '355689072970313',
            '355694073317399',
            '355694073464266',
            '355694073491046',
            '355694073524234',
            '355421070979488',
            '355427071486415',
            '353336075124736',
            '355730070183531',
            '355731070300968',
            '353332073146540',
            '353332073236085',
            '353336074095440',
            '355691070003709',
            '355691070203234',
            '355425070947585',
            '355425070947858',
            '355697076866023',
            '355697077345258',
            '352051069397906',
            '352051069455159',
            '352051069455852',
            '359266060829474',
            '359266061043521',
            '359266061236117',
            '359266061236463',
            '359266061302497',
            '359266061329904',
            '359266061330373',
            '359265061365298',
            '359265061679623',
            '359265061680225',
            '359265061717951',
            '359265061871154',
            '359265061966731',
            '359265061971418',
            '359265061971822',
            '359265061972655',
            '359266062193135',
            '13040000014010',
            '13173000025056',
            '13201002585486',
            '13060001530673',
            '355691070109001',
            '355691071066945',
            '355692072315588',
            '13060000808484',
            '13061006850215',
            '13063001584328',
            '13532005544272',
            '13044005264067',
            '13055008225293',
            '13059005904793',
            '13059006465604',
            '13059008797871',
            '13060005498745',
            '13061001065280',
            '13062006511070',
            '13062008549979',
            '13063003721357',
            '13063009722953',
            '13065003028493',
            '13072002306722',
            '13073008895817',
            '13170001553433',
            '13171006653905',
            '13171009042833',
            '13174005895683',
            '13176000311897',
            '13178002574159',
            '13179006620386',
            '13182008902240',
            '13183003967626',
            '13183007919672',
            '13184002023536',
            '13184004776693',
            '13184005309551',
            '13185005542794',
            '13185007224417',
            '13186001570318',
            '13186009280522',
            '13187004957676',
            '13188006998593',
            '13192000371856',
            '13192001691096',
            '13193001512530',
            '13193001588191',
            '13193001978392',
            '13193003768106',
            '13193005556988',
            '13201001345312',
            '13201006744113',
            '13533000203526',
            '13539000319543',
            '13041009505636',
            '13055008662925',
            '13059007668198',
            '13059008830409',
            '13061000575586',
            '13070002892030',
            '13073002940338',
            '13182003504827',
            '13183009668749',
            '13187007208473',
            '13193005602378',
            '13541004587208',
            '13039003722397',
            '13041003865796',
            '13047000996617',
            '13049002983775',
            '13061000993334',
            '13061008020619',
            '13170006024281',
            '13174009143213',
            '13179002989637',
            '13184002156021',
            '358761054574434',
            '358826055172452',
            '355735070552486',
            '359267062229861',
            '359267062375482',
            '13175000882345',
            '13060002332574',
            '13063003949883',
            '13061008030840',
            '13200003282515',
            '13060001385862',
            '13044009053375',
            '13038008701505',
            '352002071517064',
            '352002071527741',
            '352002071527758',
            '352002071527782',
            '359322061730268',
            '359322061730276',
            '13060000435643',
            '13174004622096',
            '13061002170485',
            '353328076617503',
            '353328076761822',
            '353330076576614',
            '355690079862214',
            '355690079954672',
            '355764071075800',
            '355764071244125',
            '355764071271367',
            '353330076632300',
            '353330076923279',
            '13193001697190',
            '13081000808698',
            '13173008057705',
            '359322061436783',
            '359322061437633',
            '354451068166948',
            '354451068277463',
            '354451068309555',
            '355688078710061',
            '355691078611305',
            '355690077076197',
            '355690077105129',
            '359267062124484',
            '359267062231289',
            '359267062283231',
            '359267062318714',
            '359267062334562',
            '355735070782349',
            '355736070516612',
            '13185001199821',
            '13061001464913',
            '13062008261500',
            '13182008902240',
            '13052001815766',
            '13044009053375',
            '13181004684828',
            '12646005146580',
            '13043007831758',
            '13060002773843',
            '13185006899870',
            '13029005559178',
            '13030009648199',
            '13032002961793',
            '13032008041780',
            '13033001639422',
            '13035003879054',
            '13039005974822',
            '13040006181573',
            '13042009543395',
            '13043001118384',
            '13046005170343',
            '13047007802826',
            '13048009757679',
            '13054004424224',
            '13058005296762',
            '13060004301502',
            '13060008717091',
            '13061007687103',
            '13063003712653',
            '13063005792596',
            '13067004259036',
            '13070006273104',
            '13073008665756',
            '13170009382280',
            '13172003389774',
            '13172005114915',
            '13174005884596',
            '13179000097623',
            '13183002038288',
            '13185002281230',
            '13185004069369',
            '13186004523546',
            '13187004679361',
            '13188002584066',
            '13190006917060',
            '13193001840147',
            '13194002188569',
            '13194004382764',
            '13195007949525',
            '13196002092568',
            '13198001048005',
            '13201001890713',
            '13206001889557',
            '13206006740177',
            '13207005231713',
            '13538001227739',
            '13035009597114',
            '13059005589990',
            '13060000463090',
            '13171006991982',
            '13171008019113',
            '13174003183843',
            '13180005091124',
            '13182005350534',
            '13183000704121',
            '13184004183734',
            '13186009029622',
            '13187006065569',
            '13187006632897',
            '13188003923164',
            '13190002167082',
            '13193001146685',
            '13193002939740',
            '13198000702891',
            '13200003211118',
            '13200003616399',
            '13207000492906',
            '13032006953515',
            '13035007007009',
            '13040003175289',
            '13040004748100',
            '13041004582036',
            '13044006804580',
            '13047002699417',
            '13055007115032',
            '13059005008629',
            '13059008235807',
            '13060000758770',
            '13069004926671',
            '13070001516622',
            '13176001142945',
            '13176001298432',
            '13179006257494',
            '13187006784383',
            '13193000040004',
            '13193004157069',
            '13194007059583',
            '13038008044286',
            '13040003584357',
            '13042003622385',
            '13044006657491',
            '13046003468467',
            '13047006097139',
            '13056006947425',
            '13056007441659',
            '13059002913094',
            '13060000177757',
            '13060002436136',
            '13061008611565',
            '13065009313725',
            '13170005227950',
            '13172005868585',
            '13177009922106',
            '13179001277760',
            '13179001751277',
            '13179005129900',
            '13180007626026',
            '13184001292538',
            '13185003452186',
            '13185007875754',
            '13191008897698',
            '13192004951612',
            '13192005288782',
            '13193004485155',
            '13194004688681',
            '13194006761957',
            '13196004128113',
            '13200001723445',
            '13201000724327',
            '13201001538874',
            '13201003046652',
            '13203002213614',
            '13207000137253',
            '13208001691900',
            '13208002778615',
            '13208003377078',
            '13536005910797',
            '13040001692160',
            '13044006058526',
            '13060004188362',
            '13061002173521',
            '13073004956738',
            '13174003204508',
            '13193004623508',
            '13203009169819',
            '13206002043980',
            '13032003227103',
            '13047000996617',
            '352002071292890',
            '359319061493418',
            '359319061493426',
            '359322061470824',
            '359322061536343',
            '352002071522635',
            '352002071522817',
            '359319061436789',
            '359319061436896',
            '359322061436635',
            '352002071464556',
            '352002071464564',
            '359319061559176',
            '359322061332446',
            '359322061332545',
            '359322061698804',
            '359322061698960',
            '359322061698978',
            '354451067878246',
            '354451067878303',
            '359320061234109',
            '359320061242367',
            '359320061449541',
            '359320061449582',
            '359320061449590',
            '359320061487921',
            '359320061604939',
            '359322061735879',
            '359319061559416',
            '359322061332693',
            '355765074038042',
            '355765074223800',
            '355767074089421',
            '355767074285045',
            '355767074378899',
            '354451068209334',
            '354451068246534',
            '354451068246682',
            '354451068343182',
            '352013070037368',
            '352013070037624',
            '352013070074650',
            '352013070075152',
            '352013070075285',
            '352013070107823',
            '352016070217823',
            '352016070217997',
            '352016070227590',
            '352019070162601',
            '354451068209516',
            '354451068211819',
            '354451068305124',
            '354451068343125',
            '354451068343455',
            '354451068343786',
            '354451068166864',
            '354451068166880',
            '354451068272837',
            '354451068272894',
            '354451068272928',
            '354451068309464',
            '354451068309605',
            '354451068314860',
            '354451068314878',
            '354451068315198',
            '355688078593087',
            '355691078056790',
            '355690076940450',
            '355690077046703',
            '355697077244782',
            '352002071564488',
            '352002071564546',
            '359322061730508',
            '353331075074338',
            '353337075133057',
            '355690076893873',
            '355690076894020',
            '355690077073525',
            '355690077118619',
            '355690077247038',
            '355690077254679',
            '355690077350162',
            '355695077164919',
            '355697077081077',
            '355697077124380',
            '355697077178840',
            '355697077335796',
            '359319061453560',
            '359319061453818',
            '359322061468950',
            '359322061469859',
            '352002071528178',
            '13041009505636',
            '359267062068681',
            '359267062071131',
            '359267062123825',
            '359267062124369',
            '359267062124476',
            '359267062188877',
            '359267062254679',
            '359267062333457',
            '359267062376308',
            '359267062376936',
            '13192000935031',
            '352017068644390',
            '13195006093663',
            '13185001199821',
            '355735070279288',
            '355696071143008',
            '13033002270938',
            '13039004485648',
            '13039007335014',
            '13041002685849',
            '13043009355673',
            '13048006389575',
            '13052003616980',
            '13059001179630',
            '13059001962944',
            '13062009977625',
            '13063008652946',
            '13063008658851',
            '13170000000493',
            '13180002075393',
            '13183000937747',
            '13184001092664',
            '13185004355669',
            '13187004668984',
            '13188001458908',
            '13188006769390',
            '13191001040338',
            '13193001937463',
            '13193003462718',
            '13194003250996',
            '13201006435688',
            '13207001662440',
            '13532003265573',
            '13534000391329',
            '13535001509785',
            '13537001002381',
            '13038000721048',
            '13042003883656',
            '13056006116104',
            '13060006533664',
            '13066007888726',
            '13066009481157',
            '13071003906266',
            '13171002173338',
            '13176008003405',
            '13192005637376',
            '13193004669691',
            '13541005415011',
            '352002071464176',
            '352002071464283',
            '359319061559044',
            '359319061559101',
            '359319061559143',
            '359319061559218',
            '359322061332347',
            '359322061332354',
            '359322061332370',
            '359322061698721',
            '355764074137987',
            '355764074228406',
            '355764074770647',
            '355764075035883',
            '355764075131757',
            '355764074694797',
            '355764074891971',
            '355764075243701',
            '355771075039070',
            '355771075241759',
            '353288073490918',
            '353288073792073',
            '353289071327128',
            '353289074774276',
            '353291071506362',
            '13205009493727',
            '13533004882242',
            '13534009975825',
            '13536005351182',
            '13538004845073',
            '13591000467269',
            '13202005485369',
            '13540003696523',
            '13593000547454',
            '13594002279237',
            '13438006808817',
            '13429001998158',
            '13440008263652',
            '359296065993330',
            '13034006455137',
            '13171009042833',
            '352002071247266',
            '352002071523021',
            '359319061452166',
            '359319061452976',
            '359319061453008',
            '359319061493327',
            '359319061493392',
            '359319061493475',
            '359322061304379',
            '359322061309618',
            '359322061309626',
            '359322061309667',
            '359322061320904',
            '359322061321027',
            '359322061469297',
            '355765074223586',
            '355765074237701',
            '355767074300331',
            '355767074423885',
            '355767074818431',
            '355688079903707',
            '355688079935501',
            '355690079929732',
            '355764070858784',
            '355764070901329',
            '355764070983046',
            '355764071244364',
            '355688079871193',
            '355690079876214',
            '355690079954615',
            '355690079956644',
            '355696079911448',
            '355696079911562',
            '355764070715737',
            '355764070715745',
            '355764070716487',
            '355764070777646',
            '355764071004362',
            '355764071006706',
            '355764071101325',
            '355764071151734',
            '355764071165429',
            '355764071243531',
            '355764071244224',
            '355764071360129',
            '355733070512881',
            '355735070849213',
            '13201003883096',
            '352013070074650',
            '352013070037962',
            '352013070108383',
            '352013070141442',
            '352013070141483',
            '352016070033519',
            '352016070218144',
            '352016070218268',
            '352016070227020',
            '352019070162213',
            '352019070196120',
            '355688078005561',
            '355688078036442',
            '355688078327734',
            '355688078510214',
            '355688078574483',
            '355691077928916',
            '355688078634998',
            '355691078400170',
            '13046005170343',
            '13059005843694',
            '13067007665627',
            '13069002920825',
            '13192005564109',
            '13207001766316',
            '13537002620090',
            '13539003576420',
            '13062006419068',
            '13071007579747',
            '13182004935343',
            '13184004952500',
            '13187001880913',
            '13193002144846',
            '13203008812518',
            '13536005744204',
            '13060000808484',
            '13183007919672',
            '13194002188569',
            '13188002584066',
            '352013070159337',
            '359302069406046',
            '359307068301932',
            '352013070136525',
            '352013070136749',
            '352013070141228',
            '352016070066030',
            '352013070103772',
            '352013070136293',
            '352013070136657',
            '352013070141327',
            '352013070141491',
            '352013070141533',
            '352013070173460',
            '352013070174625',
            '352016070033501',
            '352016070033568',
            '352019070169945',
            '352019070195395',
            '352019070196070',
            '352019070196161',
            '352019070196187',
            '352019070229293',
            '13541005415011',
            '13056006947425',
            '13032003227103',
            '13183005285308',
            '13070006273104',
            '359296065602725',
            '359296065602899',
            '359296065989676',
            '359296065990112',
            '359296066438665',
            '359296066791485',
            '359296066791584',
            '359296066809097',
            '359296067199027',
            '359302063401977',
            '359302063402330',
            '359302063402363',
            '359302063630039',
            '359302063630237',
            '359302063630666',
            '13185002281230',
            '13060000177757',
            '13183001117372',
            '13191001450107',
            '353334076879499',
            '353334076999339',
            '355729071173160',
            '355731071115431',
            '355731071242847',
            '355735071589461',
            '13189003969611',
            '13187004679361',
            '13193003768106',
            '13032008294587',
            '13042008273077',
            '13055005338693',
            '13060000840867',
            '13061000087285',
            '13072007682705',
            '13177009224982',
            '13207002038590',
            '13541008179804',
            '12547008917797',
            '13030001044884',
            '13030004834232',
            '13032000168029',
            '13037009219160',
            '13042004210263',
            '13048006091858',
            '13051003458963',
            '13054005990322',
            '13054007373725',
            '13055004333521',
            '13055004576830',
            '13059006178926',
            '13061008861814',
            '13172001781360',
            '13174006570574',
            '13175003259236',
            '13175006519578',
            '13175007138634',
            '13177009769820',
            '13180006138742',
            '13180007464147',
            '13180008810165',
            '13182000736661',
            '13183002448283',
            '13183003464061',
            '13186000276271',
            '13187004169082',
            '13187008448532',
            '13191008151997',
            '13193000815132',
            '13193003617246',
            '13193005600885',
            '13194002508055',
            '13201000971514',
            '13201001238194',
            '13201001958767',
            '13201002161312',
            '13202005565269',
            '13202005667636',
            '13203006990688',
            '13207000649042',
            '13208003167107',
            '13538004668384',
            '13035005216941',
            '13039000664261',
            '13043001095145',
            '13046000343853',
            '13047001819743',
            '13047005394636',
            '13053000419915',
            '13059001954768',
            '13059005808382',
            '13060001591006',
            '13060001954162',
            '13060006664931',
            '13063000532229',
            '13065004658595',
            '13066000177523',
            '13071004369803',
            '13171000506406',
            '13174001155199',
            '13175003981888',
            '13177009661225',
            '13178008697087',
            '13180000033543',
            '13184002323779',
            '13184003654016',
            '13184008824655',
            '13186009460249',
            '13188007300492',
            '13189008429231',
            '13190005397074',
            '13191008473367',
            '13193002630729',
            '13193007658527',
            '13200006293212',
            '13201001346013',
            '13205002503720',
            '13207000179180',
            '13207008173854',
            '13208005258649',
            '13539004949386',
            '111111111111111',
            '222222222222222',
            '333333333333333',
            '990001029379757',
            '13030005916277',
            '13031007008303',
            '13038008940004',
            '13039002677527',
            '13040009503336',
            '13041001456655',
            '13042007140376',
            '13043005910281',
            '13049001057738',
            '13055002036431',
            '13055006497167',
            '13059004241858',
            '13059004965035',
            '13060002235199',
            '13060002542974',
            '13060007972309',
            '13063002278342',
            '13067003077660',
            '13070006273096',
            '13071000374054',
            '13170009969599',
            '13173006892236',
            '13175006013424',
            '13179003146013',
            '13182005278875',
            '13185002305260',
            '13186007632682',
            '13188006525636',
            '13189001857099',
            '13193000033835',
            '13195006273638',
            '13198000302312',
            '13198003992192',
            '13201002036050',
            '13201008503723',
            '13536005050818',
            '13539005538519',
            '13541000228500',
            '13593002486552',
            '13593003695474',
            '13594002556279',
            '13043000207014',
            '13050008178261',
            '13052005808197',
            '13057004259326',
            '13060005855209',
            '13063003185330',
            '13171000247803',
            '13031008749707',
            '13038001999478',
            '13039007933743',
            '13052004510190',
            '13059009389355',
            '13173006599211',
            '13175005916700',
            '13179004978323',
            '13182000001892',
            '13186001566720',
            '13192003100195',
            '13192003555588',
            '13193005478308',
            '13200000571100',
            '13201000369305',
            '13201001358976',
            '13201001701233',
            '13533000758594',
            '13540005893060',
            '413047006723379',
            '12938007129759',
            '13032006135899',
            '13033004945529',
            '13040007255673',
            '13042005225013',
            '13042009494300',
            '13043001037618',
            '13044000031909',
            '13049000298952',
            '13049004890762',
            '13052000528006',
            '13060004240726',
            '13063006674561',
            '13063008304779',
            '13171009073978',
            '13182003709715',
            '13029003092644',
            '13031001667708',
            '13038003406258',
            '13039009675979',
            '13040008110117',
            '13041002151719',
            '13041004262894',
            '13042008759711',
            '13043000846308',
            '13043004092735',
            '13043006877158',
            '13043008501251',
            '13043009604807',
            '13046001811452',
            '13052009433992',
            '13060005760011',
            '13060006685407',
            '13061002829650',
            '13066007447598',
            '13207007054352',
            '359296067007584',
            '352018070012048',
            '359307068101720',
            '13182005350534',
            '13179006257494',
            '13193001512530',
            '13174003204508',
            '13198000702891',
            '13172003389774',
            '13172005114915',
            '13176001298432',
            '13056007441659',
            '12646005146580',
            '13206001889557',
            '13042003622385',
            '13042003883656',
            '13207005231713',
            '13179000097623',
            '13061008611565',
            '13040003175289',
            '354451068272894',
            '13193004623508',
            '13061007687103',
            '355764071244125',
            '13061006850215',
            '355688078036442',
            '13066007888726',
            '359322061735879',
            '13185002281230',
            '13185002636482',
            '353332075780056',
            '353332075855254',
            '353332075887729',
            '355730070846988',
            '355730070944015',
            '355691078607014',
            '355413079210379',
            '355413079414625',
            '355421079249800',
            '355421079332556',
            '355421079380928',
            '353289071327128',
            '13193004669691',
            '359296066604761',
            '352013070136293',
            '13046003468467',
            '13060000177757',
            '13183001042588',
            '13194003250996',
            '13059008235807',
            '355697077124380',
            '355795070140831',
            '355795070141532',
            '355795070143181',
            '355795070241639',
            '355795070648346',
            '355795070703562',
            '355795070758343',
            '355795070767211',
            '355795071262824',
            '355795071265942',
            '355795071341594',
            '13063008658851',
            '13186001566720',
            '13192003555588',
            '355734072234136',
            '355734072236339',
            '355734072318285',
            '355735072012505',
            '355735072012521',
            '355735072012570',
            '355735072044433',
            '355735072277025',
            '355735072377494',
            '353333077031670',
            '353336077057520',
            '353336077063254',
            '353336077063528',
            '353336077184928',
            '353337077057056',
            '353337077090677',
            '352002071458103',
            '352002071458244',
            '359319061493202',
            '359319061493293',
            '359322061316027',
            '359322061320979',
            '359322061321050',
            '359322061321092',
            '359322061502899',
            '359322061536376',
            '355730070551208',
            '355730070590206',
            '355730070709723',
            '355730070729937',
            '355730070731438',
            '355730070777894',
            '355730070958619',
            '355732070718829',
            '355695070162993',
            '355764074126832',
            '355764074222094',
            '355764074235807',
            '355764074454002',
            '355764074605066',
            '355764074800782',
            '355765076960607',
            '355771074169274',
            '355771074834844',
            '355771074934032',
            '355771074934099',
            '355691077928916',
            '13426007241823',
            '13423003298345',
            '13424004750425',
            '13425006138238',
            '13428001448719',
            '13430005698125',
            '13431006226791',
            '13433007473430',
            '13436008343569',
            '13440000629371',
            '13527000250354',
            '13423002052909',
            '13423003136180',
            '13426003923523',
            '13427008671638',
            '13428008451583',
            '13430007357019',
            '13441000909284',
            '13442000876127',
            '13530000446147',
            '13883005432244',
            '13883005793280',
            '358829050607332',
            '13853007124909',
            '13966000139482',
            '13973003019273',
            '352046061548498',
            '358829056585128',
            '13884005416153',
            '351988068743955',
            '352052062637355',
            '351986060302309',
            '352016066470428',
            '352047062506816',
            '358687051055590',
            '358761054973743',
            '13849007621688',
            '352054064459960',
            '358684054361323',
            '352065067368578',
            '354403067476901',
            '354404068613526',
            '354405068829855',
            '354407068967354',
            '354410066163737',
            '354444064600499',
            '354444068431636',
            '356986064622806',
            '356989066847165',
            '358371064142824',
            '354404068228507',
            '354404068672316',
            '354444068104043',
            '356960064839967',
            '356987061700918',
            '358371063638160',
            '358372069373208',
            '359236061399652',
            '359306061256408',
            '354405068504458',
            '354407069089836',
            '354446067084811',
            '359296066303133',
            '354405068802647',
            '356988065221687',
            '355764070715737',
            '13191008151997',
            '13054007373725',
            '13061002173521',
            '355765074223800',
            '13534000391329',
            '13191008897698',
            '13073008665756',
            '13193005600885',
            '13172005868585',
            '13186009029622',
            '13194006761957',
            '13032008294587',
            '13063008658851',
            '12938007129759',
            '13060004301502',
            '13201001958767',
            '352019070162601',
            '13060008717091',
            '13174005884596',
            '13071003906266',
            '359322061730508',
            '13200000571100',
            '355690077350162',
            '13060004188362',
            '13060000177757',
            '354444069552596',
            '354450060515953',
            '356978066555027',
            '356989060266891',
            '356989060776261',
            '356990066681216',
            '356990069828780',
            '358370067776240',
            '359229061478675',
            '13188006769390',
            '13053000419915',
            '13180000033543',
            '13060001591006',
            '13043001037618',
            '13192001691096',
            '13193001937463',
            '13062009977625',
            '13031007008303',
            '13200000571100',
            '13071004369803',
            '13063005792596',
            '13059005808382',
            '13189001857099',
            '358371064142824',
            '13073008665756'
        ];

        echo 'Serial,Nota,Data,Nome<br>';
        foreach ($imei as $i) {
            $pedidoProduto = PedidoProduto::where('imei', 'like', '%'. $i .'%')->first();
            if ($pedidoProduto) {
                echo $i . ',';
                echo (($pedidoProduto->pedido->nota) ? $pedidoProduto->pedido->nota->numero : '0') . ',';
                echo Carbon::createFromFormat('Y-m-d', $pedidoProduto->pedido->nota->data)->format('d/m/Y') . ',';
                echo $pedidoProduto->pedido->cliente->nome;
                echo '<br>';
            }
        }
    }

    /**
     * Busca de pedidos
     *
     * @return \Symfony\Component\HttpFoundation\Response
     */
    public function search()
    {
        $query = Input::get('search');

        /**
         * Pedidos
         */
        $busca = Pedido::with([
            'nota',
            'cliente',
            'rastreios', 'rastreios.rastreioRef',
            'rastreios.pedido', 'rastreios.pedido.cliente', 'rastreios.pedido.endereco',
            'rastreios.pi', 'rastreios.pi.rastreioRef',
            'rastreios.devolucao', 'rastreios.devolucao.rastreioRef',
            'rastreios.logistica', 'rastreios.logistica.rastreioRef',
        ])
            ->leftJoin('pedido_notas', 'pedidos.id', '=', 'pedido_notas.pedido_id')
            ->join('clientes', 'pedidos.cliente_id', '=', 'clientes.id')
            ->join('cliente_enderecos', 'pedidos.cliente_endereco_id', '=', 'cliente_enderecos.id')
            ->leftJoin('pedido_rastreios', 'pedidos.id', '=', 'pedido_rastreios.pedido_id')
            ->leftJoin('pedido_rastreio_pis', 'pedido_rastreios.id', '=', 'pedido_rastreio_pis.rastreio_id')
            ->leftJoin('pedido_rastreio_logisticas', 'pedido_rastreios.id', '=', 'pedido_rastreio_logisticas.rastreio_id')
            ->leftJoin('pedido_produtos', 'pedidos.id', '=', 'pedido_produtos.pedido_id')

            ->orWhere('pedidos.id', 'LIKE', '%' . $query . '%')
            ->orWhere('pedidos.codigo_marketplace', 'LIKE', '%' . $query . '%')
            ->orWhere('clientes.nome', 'LIKE', '%' . $query . '%')
            ->orWhere('cliente_enderecos.cep', 'LIKE', '%' . $query . '%')
            ->orWhere('pedido_rastreios.rastreio', 'LIKE', '%' . $query . '%')
            ->orWhere('pedido_rastreio_pis.codigo_pi', 'LIKE', '%' . $query . '%')
            ->orWhere('pedido_rastreio_logisticas.autorizacao', 'LIKE', '%' . $query . '%')
            ->orWhere('pedido_produtos.imei', 'LIKE', '%' . $query . '%')

            ->groupBy('pedidos.id')
            ->orderBy('pedidos.created_at', 'DESC')

            ->get([
                'pedidos.*'
            ]);

        return $this->listResponse($busca);
    }
}
